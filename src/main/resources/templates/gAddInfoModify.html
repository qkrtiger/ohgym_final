<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>헬스장 - 정보 수정</title>
    <link rel="shortcut icon" href="/images/header/lgo_face.ico">
    <link rel="stylesheet" th:href="@{css/font.css}">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            /*box-sizing: border-box;*/
        }

        .entire {
            margin: 0 auto;
            width: 100%;
            min-width: 600px;
        }

        .content-b {
            border: 1px solid grey;
            min-width: 600px;
            margin-bottom: 50px;
            border-radius: 30px;
        }

        .content-t {
            margin: 35px 0;
            margin-bottom: 50px;
            max-resolution: 40px 0;
        }

        h2.info-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
            padding-top: 50px;
        }

        .info-row {
            margin: 30px 0;
            border-bottom: 1.5px solid grey;
            width: 85%;
            left: 0;
            right: 0;
            margin-left: auto;
            margin-right: auto;
        }

        .info-label {
            font-weight: bold;
            font-size: 20px;
            width: 150px;
            display: table-cell;
            vertical-align: middle;
        }

        .intext {
            font-size: 1.2rem;
            border: none;
            width: 100%;
        }

        .imgbox {
            margin: 30px 0;
            border: 1px solid grey;
        }

        .img-title {
            margin-top: 20px;
            margin-left: 20px;
        }

        .timage {
            max-width: 300px;
            margin: 20px;
        }


        .img-entire{
            display: flex;
            justify-content: space-evenly;
        }


        table {
            margin-top: 40px;
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        input[type=submit], input[type=button] {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }

        input[type=submit]:hover,
        input[type=button]:hover {
            background-color: #45a049;
        }

        .btn {
            margin: 50px 20px;
            display: flex;
            flex-direction: row-reverse;
        }

        .check.active {
            background-color: #e8e8e8;
        }

        .check {
            background-color: #50C878;
        }

        .check-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            margin-left: 20px;
        }

        .check-entire {
            margin: 20px;
            display: flex;
            justify-content: space-evenly;
        }

        .checkdiv {
            margin-bottom: 30px;
            border: 1px solid;
        }

        .checkdiv label {
            margin-right: 10px;
        }

        /* 편의시설 부분 통으로 묶기 */
        .checkdiv:first-of-type {
            margin-bottom: 50px;
        }

        .checkdiv input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .checkdiv label {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 16px;
            margin-right: 10px;
        }
        .file-plus{
            border: 1px solid;
            box-shadow:2px 3px 5px 0px
        }
        .files{
            margin-top: 20px;
            margin-left: 20px;
        }
        #file {
            display: none;
        }

        .checkdiv label:hover {
            background-color: #A6FEAA;
        }

        #preview{
            width: 300px;
            margin: 20px;
        }

        textarea {
            width: 100%;
            height: 6.25em;
            border: none;
            resize: none;
        }

        .top-div{
            min-height: 900px;
        }

        .div-all {
            width: 70%;
            min-height: 900px;
            margin-top: 150px;
            margin-left: clamp(370px, 22%, 22%);
            padding-bottom: 100px;
        }
    </style>
</head>
<body class="renewal">
<header class="header">
    <th:block th:insert="~{headerGym.html}"></th:block>
</header>
<th:block th:insert="~{GymSideBar.html}"></th:block>
<div class="top-div">
    <div class="div-all">
        <div class="entire">
            <form th:action="@{gymAddInfoMo}" method="post" enctype="multipart/form-data">
                <input type="hidden" name="gymnum" th:value="${gym.gymnum}">
                <h2 class="info-title">추가 정보</h2>
                <div class="content-b">
                    <div class="content-t">
                        <div id="content" class="content">
                            <div class="info-row">
                                <span class="info-label">헬스장 이름</span>
                                <input class="intext" type="text" th:value="${gym.gname}" readonly>
                            </div>
                            <div class="info-row">
                                <span class="info-label">사업자등록번호</span>
                                <input class="intext" type="text" th:value="${gym.gregistnum}" readonly>
                            </div>
                            <div class="info-row">
                                <span class="info-label">담당자 아이디</span>
                                <input class="intext" type="text" th:value="${gym.gid}" readonly>
                            </div>
                            <div class="info-row">
                                <span class="info-label">담당자 전화번호</span>
                                <input class="intext" type="text" name="gphone" th:value="${gym.gphone}">
                            </div>
                            <div class="info-row">
                                <span class="info-label">위치</span>
                                <input class="intext" type="text" name="glocation" th:value="${gym.glocation}" placeholder="위치정보를 입력해주세요.">
                            </div>
                            <div class="info-row">
                                <span class="info-label">내용</span>
                                <textarea rows="3" cols=20 wrap="hard" name="gdescription" class="intext" placeholder="내용을 입력해주세요">[[${gym.gdescription}]]</textarea>
                            </div>
                            <div class="info-row">
                                <span class="info-label">공지사항</span>
                                <textarea rows="3" cols=20 wrap="hard" name="gnotice" class="intext" placeholder="공지사항을 입력해주세요">[[${gym.gnotice}]]</textarea>
                            </div>
                            <div class="info-row">
                                <span class="info-label">부가서비스 무료</span>
                                <textarea rows="3" cols=20 wrap="hard" name="gaddservfree" class="intext" placeholder="무료 부가서비스를 작성해주세요">[[${gym.gaddservfree}]]</textarea>
                            </div>
                            <div class="info-row">
                                <span class="info-label">부가서비스 유료</span>
                                <textarea rows="3" cols=20 wrap="hard" name="gaddservpay" class="intext" placeholder="유료 부가서비스를 작성해주세요">[[${gym.gaddservpay}]]</textarea>
                            </div>
                            <div class="info-row">
                                <span class="info-label">운영시간</span>
                                <textarea rows="3" cols=20 wrap="hard" name="goperation" class="intext" placeholder="운영시간을 입력해주세요">[[${gym.goperation}]]</textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <h3 class="check-title">시설 및 기구</h3>
                <h3 class="check-title">편의시설</h3>
                <div class="checkdiv">
                    <div class="check-entire">
                        <input type="checkbox" id="gc_cloths" th:field="${gmc.gc_cloths}" th:value="${gmc.gc_cloths}">
                        <label for="gc_cloths" class="check" th:classappend="${gmc.gc_cloths == false} ? 'active'">운동복</label>
                        <input type="checkbox" id="gc_towel" th:field="${gmc.gc_towel}" th:value="${gmc.gc_towel}">
                        <label for="gc_towel" class="check" th:classappend="${gmc.gc_towel == false} ? 'active'">수건</label>
                        <input type="checkbox" id="gc_wifi" th:field="${gmc.gc_wifi}" th:value="${gmc.gc_wifi}">
                        <label for="gc_wifi" class="check" th:classappend="${gmc.gc_wifi == false} ? 'active'">와이파이</label>
                        <input type="checkbox" id="gc_parking" th:field="${gmc.gc_parking}" th:value="${gmc.gc_parking}">
                        <label for="gc_parking" class="check" th:classappend="${gmc.gc_parking == false} ? 'active'">주차장</label>
                        <input type="checkbox" id="gc_inbody" th:field="${gmc.gc_inbody}" th:value="${gmc.gc_inbody}">
                        <label for="gc_inbody" class="check" th:classappend="${gmc.gc_inbody == false} ? 'active'">체형분석</label>
                        <input type="checkbox" id="gc_sauna" th:field="${gmc.gc_sauna}" th:value="${gmc.gc_sauna}">
                        <label for="gc_sauna" class="check" th:classappend="${gmc.gc_sauna == false} ? 'active'">사우나</label><br><br>
                    </div>
                </div>
                <br>
                <h3>기구</h3>
                <div class="checkdiv">
                    <div class="check-entire">
                        <input type="checkbox" id="gm_latpull" th:field="${gmc.gm_latpull}" th:value="${gmc.gm_latpull}">
                        <label for="gm_latpull" class="check" th:classappend="${gmc.gm_latpull == false} ? 'active'">렛풀다운</label>

                        <input type="checkbox" id="gm_shoulderpress" th:field="${gmc.gm_shoulderpress}" th:value="${gmc.gm_shoulderpress}">
                        <label for="gm_shoulderpress" class="check" th:classappend="${gmc.gm_shoulderpress == false} ? 'active'">숄더프레스</label>

                        <input type="checkbox" id="gm_citydraw" th:field="${gmc.gm_citydraw}" th:value="${gmc.gm_citydraw}">
                        <label for="gm_citydraw" class="check" th:classappend="${gmc.gm_citydraw == false} ? 'active'">시티드로우</label>

                        <input type="checkbox" id="gm_legpress" th:field="${gmc.gm_legpress}" th:value="${gmc.gm_legpress}">
                        <label for="gm_legpress" class="check" th:classappend="${gmc.gm_legpress == false} ? 'active'">레그프레스</label>

                        <input type="checkbox" id="gm_smithmachine" th:field="${gmc.gm_smithmachine}" th:value="${gmc.gm_smithmachine}">
                        <label for="gm_smithmachine" class="check" th:classappend="${gmc.gm_smithmachine == false} ? 'active'">스미스머신</label>

                        <input type="checkbox" id="gm_lyinglegcurl" th:field="${gmc.gm_lyinglegcurl}" th:value="${gmc.gm_lyinglegcurl}">
                        <label for="gm_lyinglegcurl" class="check" th:classappend="${gmc.gm_lyinglegcurl == false} ? 'active'">라잉레그컬</label>

                        <input type="checkbox" id="gm_chestfly" th:field="${gmc.gm_chestfly}" th:value="${gmc.gm_chestfly}">
                        <label for="gm_chestfly" class="check" th:classappend="${gmc.gm_chestfly == false} ? 'active'">체스트플라이</label>

                        <input type="checkbox" id="gm_hyperextension" th:field="${gmc.gm_hyperextension}" th:value="${gmc.gm_hyperextension}">
                        <label for="gm_hyperextension" class="check" th:classappend="${gmc.gm_hyperextension == false} ? 'active'">하이퍼익스텐션</label><br><br>
                    </div>
                </div>
                <div>
                    <div class="imgbox">
                        <h2 class="img-title">사진 등록</h2>
                        <div class="files">
                            <label for="file" class="file-plus">파일 추가</label>
                            <input type="file" name="files" id="file" onchange="readURL(this);">
                        </div>
                        <div class="img-entire">
                            <div th:if="${gym.gsysname == null}">
                                <h3 id="noImage">등록된 이미지가 없습니다</h3>
                            </div>
                            <div th:unless="${gym.gsysname == null}">
                                <img th:src="@{upload/gym/} + ${gym.gsysname}" class="timage">
                                <input type="hidden" name="gsysname" th:value="${gym.gsysname}">
                                <input type="hidden" name="goriname" th:value="${gym.goriname}">
                            </div>
                            <img id="preview" />
                        </div>
                    </div>
                    <div class="btn">
                        <input type="submit" value="저장하기">
                        <input type="button" value="이전으로" th:onclick ="|back(gymnum=${gym.gymnum})|">
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<footer class="footer">
    <th:block th:insert="~{footer.html}"></th:block>
</footer>
</body>
<script th:inline="javascript">
    $(function () {
        let m = [[${msg}]];//msg가 없으면 null
        if(m != null){
            alert(m);
        }
    });

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('preview').src = e.target.result;
                document.getElementById('noImage').hidden = true;
            };
            reader.readAsDataURL(input.files[0]);
        } else {
            document.getElementById('preview').src = "";
        }
    }

    function back(gymnum) {
        location.href = '/gAdditionInfo?gymnum=' + gymnum;
    }


    //체크박스 요소 가져오기
    var checkboxes = document.querySelectorAll("input[type='checkbox']");

    //각 체크박스에 클릭 이벤트 추가
    checkboxes.forEach(function(checkbox) {
        checkbox.onclick = function() {
            //console.log($(this).next().next());
            //체크박스 상태 확인
            if (checkbox.checked) {
                //체크된 경우 녹색으로 변경
                $(this).next().next().removeClass("active");
            } else {
                //체크 해제된 경우 회색으로 변경
                $(this).next().next().addClass("active");
            }
        }
    });

    function setSidebarHeight() {
        const sidebar = document.querySelector('.aside');
        const mainContent = document.querySelector('.top-div');
        const mainContentStyles = window.getComputedStyle(mainContent);
        const mainContentHeight = parseFloat(mainContentStyles.height);
        const marginTop = parseFloat(mainContentStyles.marginTop);
        const marginBottom = parseFloat(mainContentStyles.marginBottom);

        let sidebarHeight = mainContentHeight + marginTop + marginBottom;

        sidebar.style.height = sidebarHeight + 'px';
    }

    window.addEventListener('load', setSidebarHeight);
    window.addEventListener('resize', setSidebarHeight);

</script>
</html>
